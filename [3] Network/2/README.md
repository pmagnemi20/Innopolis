# Сети, часть 2. Домашнее задание

1) Что будет, если удалить /etc/hosts?
Ответ: В Linux существует файл /etc/nsswitch.conf, строка hosts, которая определяет, где ОС будет запрашивать ip адрес нужного ресурса по доменному имени при необходимости.
![](https://i.imgur.com/GKCBhvy.png)
В моем случае первым делом система пойдет в **files**, в  /etc/hosts. Если там нет нужной записи, то далее идет **mdns4_minimal**, который пытается разрешить имя с использованием параллельного (multicast) DNS. **[NOTFOUND=return]** означает, что любой ответ notfound, предшествующий процессу mdns4_minimal, должен считаться значимым (авторитетным) и что система не будет пытаться продолжать искать ответ. **dns** запись означает запрос имён у DNS серверов(адреса dns серверов лежат в /etc/resolv.conf). **Mymachines** означает, что если домен совпадает с именем хоста, с которого идет запрос, то сразу же вернется ip адрес машины.
Таким образом, если мы удалим файл /etc/hosts, то ОС пойдет искать записи дальше по цепочке.
2) Сколько запросов делает ваш DNS resolver, чтобы определить адрес www.google.co.jp?
Ответ:4 запроса
![](https://i.imgur.com/6322goe.png)
3) Какая SPF запись нужна для моего почтового сервера, чтобы его письма не заблокировали другие почтовые серверы?
Ответ: Запись в DNS у нашего домена в записи TXT: v=spf1 +all"
v=spf1 - версия spf, +all - означает, что письма от отправителя в нашем домене не должны блокироваться.
4) Применительно к протоколу http опишите что происходит при открытии в браузере http://innopolis.university. Опишите со всеми подробностями
Ответ:
Первым делом ОС должна найти ip адрес сервера через протокол DNS. Порядок поиска описан в первом вопросе.
Далее, как только браузер знает IP адрес сервера, клиент пытается установить TCP соединение. Все начинается с рукопожатия:
![](https://i.imgur.com/5i1u2d3.png)
Далее клиент отправляет запрос, в нашем случае метод будет GET со всеми необходимыми заголовками, чтобы сервер мог понять как нужно взаимодействовать с клиентом, в ответ сервер присылает html файл, который уже содержит шрифты, скрипты, картинки и прочий контент, который соответственно подгрузуится через другие запросы.
![](https://i.imgur.com/BY7U2vd.png)
Ну и в конце само собой, браузер получив весь необходимый контент, отрисовывает страницу сайта Университета Иннополис.
![](https://i.imgur.com/WXPi2pI.jpg)

5) Как заблокировать исходящий почтовый трафик со своего компьютера чтобы предотвратить рассылку спама с машины?
Ответ: Чтобы блокировать весь исходящий траффик, который будет передаваться по протоколу smtp, для этого заблокируем дефолтный порт получателя для smtp, это порт 25, добавим запись в файерволл
```
 sudo iptables -A OUTPUT -p tcp --dport 25 -j DROP
```
6) Разверните сервер vsftpd, подробности в практическом задании в секции ftp. Можно приложить лог процесса передачи файла по ftp
Ответ:
Все проделал, развернул, перекинул файл на удаленный ftp сервер через put:
![](https://i.imgur.com/LMIbdbN.png)



